\documentclass[oneside,a4paper,12pt]{extreport}

% Font tiếng Việt
%\usepackage[T5]{fontenc}
\usepackage[utf8]{vietnam}
\usepackage{tabularx}
%\DeclareTextSymbolDefault{\DH}{T1}

% Tài liệu tham khảo
\usepackage[
	sorting=nty,
	backend=bibtex,
	defernumbers=true]{biblatex}
\usepackage[unicode]{hyperref} % Bookmark tiếng Việt
\addbibresource{references.bib}

\makeatletter
\def\blx@maxline{80}
\makeatother

\usepackage{etoolbox}

\makeatletter
\@addtoreset{chapter}{part}
\makeatother

\pretocmd{\part}{\setcounter{chapter}{1}}{}{}


% Chèn hình, các hình trong luận văn được để trong thư mục Images/
\usepackage{graphicx}
\graphicspath{ {images/} }
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{subfigure}

% Chèn và định dạng mã nguồn
\usepackage{listings}
\usepackage{color}
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
\lstset{style=mystyle}

% Chèn và định dạng mã giả
\usepackage{amsmath}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\makeatletter
\def\BState{\State\hskip-\ALG@thistlm}
\makeatother

% Bảng biểu
\usepackage{multirow}
\usepackage{array}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

% Đổi tên mặc định
% \renewcommand{\chaptername}{Chương}
% \renewcommand{\figurename}{Hình}
% \renewcommand{\tablename}{Bảng}
% \renewcommand{\contentsname}{Mục lục}
% \renewcommand{\listfigurename}{Danh sách hình}
% \renewcommand{\listtablename}{Danh sách bảng}
% \renewcommand{\appendixname}{Phụ lục}

\usepackage[Glenn]{fncychap}

\usepackage{titlesec}

\titleformat{\part}[display]
  {\normalfont\Large\bfseries\color{red}} % Định dạng: cỡ chữ, đậm, màu đỏ
  {\thepart.} % Số La Mã tự động với dấu chấm
  {1em} % Khoảng cách giữa số và tiêu đề
  {}


% Dãn dòng 1.5
\usepackage{setspace}
\onehalfspacing

% Thụt vào đầu dòng
% \usepackage{indentfirst}           %tao cmt cái này lại

% Canh lề
\usepackage[
  top=30mm,
  bottom=25mm,
  left=30mm,
  right=20mm,
  includefoot]{geometry}
  
% Trang bìa
\usepackage{tikz}
\usetikzlibrary{calc}
\newcommand\HRule{\rule{\textwidth}{1pt}}

\newcommand{\tenSV}{Nguyễn~Văn~A~-~Trần~Văn~B} % Dấu ~ là khoảng trắng không được tách (các chữ nối với nhau bằng dấu ~ sẽ nằm cùng 1 dòng
\newcommand{\mssv}{1234567}
\newcommand{\tenKL}{Sử~dụng~LaTeX trong Khoá~luận~tốt~nghiệp} % Chú ý dấu ~ trong tên khóa luận
\newcommand{\tenGVHD}{Tên~Giáo~Viên}
\newcommand{\tenBM}{Công nghệ tri thức}

\begin{document}

\input{cover-page/main-cover/main.tex}
\include{cover-page/sub-cover/main}

\pagenumbering{roman} % Đánh số i, ii, iii, ...


% Mục lục, danh sách hình, danh sách bảng
%\addcontentsline{toc}{chapter}{Mục lục}
\tableofcontents
\listoffigures
\listoftables

\titleformat{\chapter}
  {\normalfont\Large\bfseries\color{blue}} % Định dạng: cỡ chữ, đậm, màu đỏ
  {\thechapter.}
  {1em} % Khoảng cách giữa số và tiêu đề
  {}

%\addcontentsline{toc}{chapter}{Tóm tắt}
\include{acknowledgements.tex}

\include{definition-and-acronyms}

\clearpage

\pagenumbering{arabic} % Đánh số 1, 2, 3, ...

% Các chương nội dung
\include{introduction/main.tex}
\include{project-structure/main.tex}
\include{project-management/main.tex}
\include{system-requirement/main.tex}
\include{system-architecture/main.tex}
\include{feature/main.tex}
\include{api-and-interfaces/main.tex}


% In tài liệu tham khảo
\addcontentsline{toc}{chapter}{Tài liệu tham khảo}

\DeclareNameAlias{sortname}{last-first}
\DeclareNameAlias{default}{last-first}

\printbibliography[title={Tài liệu tham khảo}, notkeyword=Viet, resetnumbers] 
% ===================================================================== %
% CHÚ Ý: phải gán lại resetnumbers=số tài liệu tham khảo tiếng Việt + 1 %
% ===================================================================== %


\end{document} 